define("step:widget/ads/brand-ads/brand-ads.js",function(a,e,n){var t=a("common:widget/lib/tangram/base/base.js");n.exports.init=function(a){var e=[];e.push("type=brand_ad"),e.push("page=album"),e.push("aid="+a),e.push("eidenc="+F.context("eid")),e.push("t="+1*new Date);var n=t.dom.query(".brand-pro-wrap a"),i="/static/article/ui/log/log.gif";t.each(n,function(a,n){t.on(a,"click",function(){var a=document.createElement("img");a.src=i+"?"+e.join("&"),window["___article_brand_"+1*new Date+n]=a})})}});
;define("step:widget/content/content.js",function(e,n,t){e("common:widget/lib/tangram/base/base.js"),e("common:widget/lib/fis/event/event.js").eventCenter;t.exports.init=function(){}});
;define("step:widget/header/header.js",function(e,n){function i(e){var n="http://tts.baidu.com/text2audio?tex=TEXTPLACEHOLDER&cuid=baiduid&lan=zh&ctp=1&pdt=311";if(e=encodeURIComponent(e),9===c.browser.ie||10===c.browser.ie||navigator.userAgent.search("rv:11.0")>-1)for(e=e.slice(0,2e3);;)try{decodeURIComponent(e);break}catch(i){e=e.slice(0,-1)}return n.replace("TEXTPLACEHOLDER",e)}function o(){c.dom.setStyle(l,"display","inline-block")}function t(){c.dom.setStyle(l,"display","none")}function a(){return"undefined"==typeof Audio?1:(s=new Audio,window.onload=function(){if("performance"in window&&"timing"in window.performance&&"navigation"in window.performance){var e=window.performance.timing,n=e.responseEnd-e.requestStart,i=Math.floor(10*Math.random());1===i&&u.send(location.href,2016,{module:"step",page:"index",requestTime:n,BFEType:F.context("BFEType")})}else;},c.on(l,"click",function(){if(!s.paused)return s.pause(),u.send(location.href,2016,{module:"step",page:"index",pos:"audio-pause",action:"click"}),1;var e=c.dom.query(".step-item-container")[r].innerText;s.src=i(e),s.play(),u.send(location.href,2016,{module:"step",page:"index",pos:"audio-play",action:"click"})}),p.on("step/flip",function(e,n){r=n.currentStepIndex,d=n.totalStep,s.pause(),d-1>r&&r>0?o():t()}),s.addEventListener("pause",function(){c.dom.removeClass(l,"playing")},!1),void s.addEventListener("play",function(){c.dom.addClass(l,"playing")},!1))}var d,r,s,c=e("common:widget/lib/tangram/base/base.js"),p=e("common:widget/lib/fis/event/event.js").eventCenter,u=e("common:widget/ui/log/log.js"),l=c.dom.query("#exp-title .audio-wp")[0];n.init=a});
;define("step:widget/mooncake/mooncake.js",function(require,exports,module){var $=require("common-jquery:widget/lib/jquery/jquery.js"),bt=require("common-jquery:widget/js/util/template/template.js"),prizeTpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="dialog-bg">    <span class="sun"></span>    <span class="close-icon"></span>    <span class="wuren"></span>    <span class="suixie"></span>    <span class="caidai"></span>    <span class="tooltip"></span>    <p class="info">        <span class="highlight">恭喜中奖</span>，        <span class="text">留下您手机号，我们火速联系为您颁奖。</span>        <span class="num">手机号：</span>           <input type="text" placeholder="请输入手机号" class="ipt">        <span class="btn">提交</span>    </p>    <div class="bottom-block">        <div class="left">            <h1>活动规则<span class="sanjiao-icon"></span></h1>            <ul>                当幸运的你拿到“至尊五仁月饼”时，就可以获得我们为您精心准备的中秋礼品。同志们，经验浏览多，中奖机会大，把握此刻中秋，大奖等你来拿！！！            </ul>        </div>        <div class="right">            <h1>中秋经验大放送<span class="sanjiao-icon"></span></h1>            <ul>                ');for(var i=0;length>i;i++)_template_fun_array.push('                    <li>                        <span class="yuan-icon"></span>                        <a target="_blank" href="',"undefined"==typeof tempExpShow[i].href?"":baidu.template._encodeHTML(tempExpShow[i].href),'">',"undefined"==typeof tempExpShow[i].title?"":baidu.template._encodeHTML(tempExpShow[i].title),"</a>                    </li>                ");_template_fun_array.push("            </ul>        </div>    </div></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],noprizeTpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="dialog-bg">    <span class="sun"></span>    <span class="close-icon"></span>    '),_template_fun_array.push(0==random?'        <span class="hongdou"></span>        <div class="rules" style="margin-top: 70px;">    ':1==random?'        <span class="fruit"></span>        <div class="rules" style="margin-top: 70px;">    ':2==random?'        <span class="lianrong"></span>        <div class="rules" style="margin-top: 30px;">    ':'        <span class="icecream"></span>        <div class="rules" style="margin-top: 54px;">    '),_template_fun_array.push('            <h1>活动规则<span class="sanjiao-icon"></span></h1>        当幸运的你拿到<span class="green">“至尊五仁月饼”</span>时，就可以获得我们为您精心准备的中秋礼品，同志们，经验浏览多，中奖机会大，把握此刻中秋，大奖等你来拿！！！    </div>    <div class="bottom-block1">        <h1 class="green">中秋经验大放送<span class="sanjiao-icon"></span></h1>        <ul>            ');for(var i=0;2>i;i++)_template_fun_array.push('                <li>                    <span class="yuan-icon"></span>                    <a target="_blank" href="',"undefined"==typeof tempExpShow[i].href?"":baidu.template._encodeHTML(tempExpShow[i].href),'">',"undefined"==typeof tempExpShow[i].title?"":baidu.template._encodeHTML(tempExpShow[i].title),"</a>                </li>            ");_template_fun_array.push("        </ul>        <ul>            ");for(var i=2;4>i;i++)_template_fun_array.push('                <li>                    <span class="yuan-icon"></span>                    <a target="_blank" href="',"undefined"==typeof tempExpShow[i].href?"":baidu.template._encodeHTML(tempExpShow[i].href),'">',"undefined"==typeof tempExpShow[i].title?"":baidu.template._encodeHTML(tempExpShow[i].title),"</a>                </li>            ");_template_fun_array.push("        </ul>    </div></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],As={init:function(){var a=$(".mooncake-superman1"),t=$(".mooncake-block"),e=(t.offset().top+20,$(window).height(),$(document).height()),i=!1,n=function(a){var t="";switch(+a){case 1:t="网络错误";break;case 2003:t="未登录";break;case 2044:t="未登录";break;case 2046:t="手机号不合法";break;default:t="发生网络错误，请稍后重试~"}return t},l=[{title:"中秋购买月饼要注意什么？",href:"http://jingyan.baidu.com/article/90808022e927ccfd91c80fa7.html"},{title:"中秋佳节如何做好吃的菜肴",href:"http://jingyan.baidu.com/article/59703552d712948fc007402b.html"},{title:"中秋节手工——怎样制作纸灯笼",href:"http://jingyan.baidu.com/article/ed2a5d1f25e3e509f6be1716.html"},{title:"中秋之际―紫薯月饼",href:"http://jingyan.baidu.com/article/fedf073765e10635ac8977a4.html"},{title:"中秋节吃什么-美味的芝香排骨做节日餐",href:"http://jingyan.baidu.com/article/a17d52855aabb98099c8f274.html"},{title:"怎样在中秋沐浴祈福获得爱情?",href:"http://jingyan.baidu.com/article/d169e186824d00436611d8b9.html"},{title:"【中秋节】手工制作孔明灯方法",href:"http://jingyan.baidu.com/article/fedf073718f71b35ac8977b6.html"},{title:"怎样做中秋祈福莲花灯?",href:"http://jingyan.baidu.com/article/4d58d541eef88e9dd4e9c085.html"},{title:"怎样DIY不织布月饼送好友过中秋",href:"http://jingyan.baidu.com/article/95c9d20df3eb6fec4e756183.html"},{title:"中秋将至,如何拍摄唯美的满月照",href:"http://jingyan.baidu.com/article/90895e0fb87d5064ec6b0b9c.html"},{title:"中秋送礼方案",href:"http://jingyan.baidu.com/article/f7ff0bfc49ec612e26bb1393.html"},{title:"中秋节怎样挑选旅游地",href:"http://jingyan.baidu.com/article/046a7b3e139775f9c27fa993.html"},{title:"亚洲各国中秋节不同习俗攻略",href:"http://jingyan.baidu.com/article/c14654136083f70bfcfc4c92.html"},{title:"教你用ps制作中秋贺卡!",href:"http://jingyan.baidu.com/article/92255446f1bd4f851648f492.html"},{title:"【中秋节】莲蓉月饼做法详细图解",href:"http://jingyan.baidu.com/article/19192ad851754ae53e570791.html"},{title:"中秋佳节到了,如何挑选月饼?",href:"http://jingyan.baidu.com/article/e4511cf3452ef02b845eafb4.html"},{title:"中秋节,如何欢度才尽兴?",href:"http://jingyan.baidu.com/article/f79b7cb3158a389144023eb3.html"},{title:"中秋佳节如何做好吃的菜肴",href:"http://jingyan.baidu.com/article/59703552d712948fc007402b.html"},{title:"中秋佳节做什么比较好?",href:"http://jingyan.baidu.com/article/54b6b9c0ede41a2d583b472b.html"},{title:"中秋节送什么礼品好呢",href:"http://jingyan.baidu.com/article/a24b33cd1932ce19fe002b20.html"},{title:"中秋这个季节,你会想喝哪种茶?【经典之作】",href:"http://jingyan.baidu.com/article/414eccf6434ab26b431f0a3f.html"},{title:"中秋节月饼的健康吃法?",href:"http://jingyan.baidu.com/article/ac6a9a5e0c2a5b2b653eac0f.html"},{title:"中秋节公司可以开展的企业文化活动",href:"http://jingyan.baidu.com/article/75ab0bcbbf3f34d6864db230.html"},{title:"中秋节如何发有身价的礼品",href:"http://jingyan.baidu.com/article/5bbb5a1b064d6f13eba1790e.html"},{title:"中秋节选择什么礼品送客户比较合适",href:"http://jingyan.baidu.com/article/6181c3e0b36676152ef1531a.html"},{title:"2016中秋节送礼三个不能选",href:"http://jingyan.baidu.com/article/3aed632e305df170108091e7.html"},{title:"2016中秋节怎么放假",href:"http://jingyan.baidu.com/article/2c8c281da168a30008252ae2.html"},{title:"致中秋:我们为什么要送礼? ",href:"http://jingyan.baidu.com/article/08b6a591b96f8714a80922e2.html"},{title:"世界各地过中秋",href:"http://jingyan.baidu.com/article/4b52d702a5e3a0fc5d774b79.html"},{title:"2016中秋送礼,健康时尚成新趋势",href:"http://jingyan.baidu.com/article/48b558e3207abb7f38c09af0.html"},{title:"PS教大家设计制作中秋节海报",href:"http://jingyan.baidu.com/article/948f59241a0569d80ff5f9ce.html"},{title:"中秋节的习俗与文化",href:"http://jingyan.baidu.com/article/c45ad29c235522051753e2db.html"},{title:"中秋节有什么好玩的活动游戏呢?",href:"http://jingyan.baidu.com/article/93f9803f369a80e0e46f55cb.html"},{title:"中秋节要做哪些重要的事?",href:"http://jingyan.baidu.com/article/a3a3f811d8f03c8da2eb8a14.html"},{title:"中秋国庆双节临近,盘点抢票五大实用攻略",href:"http://jingyan.baidu.com/article/a948d651178aff0a2ccd2e52.html"},{title:"2016中秋节礼品采购方案及礼品推荐",href:"http://jingyan.baidu.com/article/49711c617c7306fa441b7ca3.html"},{title:"2016中秋节送什么礼好?——中秋送礼大全.",href:"http://jingyan.baidu.com/article/20b68a88a6956b796cec6289.html"},{title:"中秋临近,教大家一款月饼的做法",href:"http://jingyan.baidu.com/article/6181c3e0bd6374152ef1531d.html"},{title:"中秋吃月饼的禁忌",href:"http://jingyan.baidu.com/article/ed2a5d1f60fea009f6be1709.html"},{title:"中秋自制美味--枣泥月饼",href:"http://jingyan.baidu.com/article/295430f1fb1a9f0c7e0050cb.html"}],c={BdStoken:F.context("BdStoken"),bdstt:F.context("bdstt")};a.on("click",function(){"none"!==a.css("display")&&$.post("/submit/activity?method=midAutumnLottery",c,function(a){a.errno?alert(n(a.errno)):(i=1===a.data.won?!0:!1,p())})});var r=function(a){for(var t=[],e=0;a>e;e++){var i=Math.ceil(39*Math.random());t.indexOf(i)>-1?e--:t.push(i)}return t},p=function(){var a=$("body"),t='<div class="mask-mooncake" style="height: '+e+'px"></div>',p=r(4),s=[];if(s.push(l[p[0]],l[p[1]],l[p[2]],l[p[3]]),a.append(t),i){var h={length:s.length,tempExpShow:s};a.append(prizeTpl(h));var o=$(".suixie");o.addClass("flash"),$(".btn").on("click",function(){var a=$(".ipt").val(),t=/^1\d{10}$/;return t.test(a)?(c=$.extend(c,{mobile:a}),void $.post("/submit/activity?method=midAutumnFillPhoneNumber",c,function(a){a.errno?alert(n(a.errno)):$(".info").html("提交成功")})):void alert("请输入有效手机号")})}else{var m={random:Math.floor(3*Math.random()),tempExpShow:s};a.append(noprizeTpl(m))}$(".close-icon").on("click",function(){$(".mask-mooncake").hide(),$(".dialog-bg").remove();var a=$(".suixie");1===a.length&&$eleSuixie.removeClass("flash")})}}};module.exports=As});
;define("step:widget/pager/pager.js",function(e,t,o){var n=e("common-jquery:widget/lib/jquery/jquery.js"),r=e("common:widget/lib/tangram/base/base.js"),i=e("common:widget/lib/fis/event/event.js").eventCenter,a=e("common:widget/ui/log/log.js");o.exports=function(){var e=12,t=r.q("item"),o=r.q("step"),c=0,s=0,l=0,d=0,m=0,p=!1,g={},h=!1,u=function(){for(var o=0,n=t.length;n>o;o++)r.dom.setStyle(t[o],"display","none");for(var i=Math.min(m+e,t.length),o=m;i>o;o++)r.dom.setStyle(t[o],"display","block")},f=function(){r.array.each(o,function(e,t){var o=e.children[0];if(r.dom.hasClass(o,"preview")){var n,i,a=r.dom.create("p",{"class":"preview-data"}),c=r.dom.create("div",{"class":"triangle-icon"}),s=r.dom.getAttr(o,"data"),d=r.dom.getAttr(o,"data-type");0===+d?a.innerHTML=s:1===+d&&(n=F.context("hiori")+s+".jpg",i='<img src="'+n+'" width="80px" height="60px">',r.dom.insertHTML(a,"afterBegin",i),r.dom.addClass(a,"preview-img")),r.on(o,"mouseover",function(){r.dom.insertAfter(a,o),r.dom.insertAfter(c,o)}),r.on(o,"mouseout",function(){r.dom.remove(a),r.dom.remove(c)})}r.on(o,"click",function(){l!==t&&v(t)})}),r.g("pre")&&r.on("pre","click",function(){m>0&&(m=Math.max(m-e,0),u())}),r.g("next")&&r.on("next","click",function(){m+e<t.length&&(m=Math.min(m+e,t.length-e),u())}),i.on("stepPlay.left",function(){v(l-1)}),i.on("stepPlay.right",function(){v(l+1)}),r.on(document,"keydown",function(e){var t=e||window.event;r.event.stopPropagation(t),37===t.keyCode&&(g.keyboard_left=1,i.fire("stepPlay.left")),39===t.keyCode&&(g.keyboard_right=1,i.fire("stepPlay.right"))});var n=r.browser.firefox,a=n?"DOMMouseScroll":"mousewheel";r.on("body",a,function(e){r.event.preventDefault(e);var t=r.event.getTarget(e),o=r.dom.query("#step-item-"+l+" .tangram-scrollpanel-main");if(!(o.length>0&&r.dom.contains(o[0],t))){var n=r.event.get(e),a=n.detail?-n.detail:n.wheelDelta;0>a?(g.mousewheel_forward=1,i.fire("stepPlay.right")):(g.mousewheel_backward=1,i.fire("stepPlay.left"))}}),r.on("left-cover","mouseover",function(e){r.event.stopPropagation(e),r.dom.addClass("left-cover","cover-hover")}),r.on("left-cover","mouseout",function(e){r.event.stopPropagation(e),r.dom.removeClass("left-cover","cover-hover")}),r.on("left-cover","click",function(e){r.event.stopPropagation(e),g.left_btn_click=1,i.fire("stepPlay.left")}),r.on("right-cover","mouseover",function(e){r.event.stopPropagation(e),r.dom.addClass("right-cover","cover-hover")}),r.on("right-cover","mouseout",function(e){r.event.stopPropagation(e),r.dom.removeClass("right-cover","cover-hover")}),r.on("right-cover","click",function(e){r.event.stopPropagation(e),g.right_btn_click=1,i.fire("stepPlay.right")})},v=function(e,t){e===c-2&&n(".wgt-step-mooncake").show(),0>e||e>=c||p||(p=!0,y(e),w(e),k(e),t?(imgplusArray=r.lang.toArray(r.dom.query(".step-img-wrapper",r.g("step-item-"+e))),g.page_show=1):(g.page_request=1,g.cid=F.context("cid")),g.expGroup=F.context("expGroup")||"G0",a.send(location.href,F.context("typeId"),g),g={},l=e,i.fire("step/flip",{currentStepIndex:l,totalStep:c}),a.send(window.location.href,F.context("typeId"),{module:"step",page:"index",pos:"play-list",cur:l,last:l===c-1?1:0,action:"flip"}))},y=function(n){r.q("current")[0]&&r.dom.removeClass(r.q("current")[0],"current"),r.dom.addClass(r.dom.children(o[n])[0],"current");var i=r.array.indexOf(t,o[n]),a=i-m;if(a>=0){if(e>a)return;for(;i>=m+e;)m=Math.min(m+e,t.length-e)}else do m=Math.max(m-e,0);while(m>i);u()},w=function(e){var t=920*(e-l),o=920*l,n=20,i=20,a=20,c=setInterval(function(){o+=t/n,r.dom.setStyle("step-play-list","left",-o),--i||(clearInterval(c),p=!1)},a)},x=function(e){if(e===c-1&&!h)return q(),void(h=!0);{var t=r.dom.query(".step-img-wrapper",r.g("step-item-"+e));r.dom.query(".step-img-wrapper",r.g("step-item-"+(e-1)))}r.array.each(t,function(t){var o=r.dom.getAttr(t,"imgLoaded");if("0"===o){r.dom.setAttr(t,"imgLoaded",1);{var n=r.dom.query("img",t)[0];r.dom.query(".step-img-wrapper",r.g("step-item-"+(e-1)))}b(n,r.dom.getAttr(n,"data-src"),function(e){r.dom.setAttr(e.item,"imgLoaded",2),r.dom.setAttr(e.img,"_height",parseInt(n.height)),r.dom.setAttr(e.img,"_width",parseInt(n.width));var t=r.dom.query(".img-cover",e.item)[0],o=r.dom.query(".inner-img-cover",e.item)[0];r.dom.setStyles(o,{height:n.height,width:n.width}),r.dom.setStyles(t,{height:n.height,width:n.width}),i.fire("adjustSingleImg",{container:e.item,resizedContainerHeight:r.dom.getStyle(e.item,"height")})},{item:t,img:n})}})},k=function(e){x(e,"flag"),c-1>e?(x(e+1),r.show("right-cover")):r.hide("right-cover"),0===e?r.hide("left-cover"):(x(e-1),r.show("left-cover"))},_=function(e,t,o){var n=new Image;n.onload=function(){var r=this.width,i=this.height,a=0,c=0;r/i>=t/o?(i=t/r*i,r=t,a=(o-i)/2):(r=o/i*r,i=o,c=(t-r)/2),e.style.left=c+"px",e.style.top=a+"px",e.style.width=r+"px",e.style.height=i+"px",n.onload=null,n=null},n.src=e.src},q=function(){r.ajax.get("/asyncreq?method=getRecommand&eidEnc="+F.context("eid"),function(e,t){var o=r.json.parse(t);if(0===o.errno){var n=o.data.recommendExpList;if(!n)return;var i=0,c=Math.min(n.length,5),s=[],l=null;for(s.push("<h3>你可能对这些经验也感兴趣</h3>");c>i;i++)l=n[i],s.push('<div class="recommend-exp '+(i===c-1?" last":"")+'">'),s.push('<div class="recommend-exp-image">'),s.push('<a class="recommend-exp-link" href="/album/'+l.eidEnc+'.html" target="_self">'),s.push('<img class="recommand-img" alt="'+l.title+'" src="'+F.context("hi")+l.picEnc+'.jpg" width="120px" height="90px">'),s.push('<div class="img-border"></div>'),s.push("</a>"),s.push("</div>"),s.push('<a class="recommend-exp-title" href="/album/'+l.eidEnc+'.html" target="_self" title="'+l.title+'">'+l.title+"</a>"),s.push("</div>");r.g("recommend-list-container").innerHTML=s.join(""),r.array.each(r.g("recommend-list-container").getElementsByTagName("img"),function(e){_(e,120,90)}),r.array.each(r.dom.query(".recommand-list .recommend-exp"),function(e){r.un(e,"click"),r.on(e,"click",function(){a.send(window.location.href,F.context("typeId"),{module:"step",page:"index",pos:"step_end_article",action:"click",expGroup:F.context("expGroup")||"G0"})})})}}),r.on("replay-step","click",function(e){r.event.preventDefault(e),g.reread_btn_click=1,v(0)}),r.on("replay-step-e","click",function(e){r.event.preventDefault(e),g.reread_btn_click=1,v(0)});var e=r.dom.query(".replay-img .recommand-img")[0],t=r.dom.getAttr(e,"data-src");e.src=t};i.on("step/flip",function(e,t){var o=t.currentStepIndex,r=t.totalStep;o===r-2?n(".mooncake-superman1").show():n(".mooncake-superman1").hide()});var b=function(e,t,o,n){e||(e=new Image),e.onload=function(){o&&o(n),e.onload=null},e.src=t};return{init:function(n){return o.length<2?!1:(c=o.length,s=Math.ceil(t.length/e),l=n,d=parseInt(r.array.indexOf(t,o[n])/e,10)+1,m=(d-1)*e,u(),t.length<=e&&r.dom.setStyle("step-pager-list","width",40*t.length),f(),void v(n,1))}}}()});
;define("step:widget/ui/scrollbar/scrollbar.js",function(l,r,e){var o=l("common:widget/lib/tangram/ui/ScrollPanel/ScrollPanel.js");e.exports=o});
;define("step:widget/ui/adjust-size/adjust-size.js",function(e,t,i){var r=e("common:widget/lib/tangram/base/base.js"),o=e("common:widget/lib/fis/event/event.js").eventCenter,h=e("step:widget/ui/scrollbar/scrollbar.js");i.exports=function(){var e=600,t=1024,i=130,a=920,n=16,s={"brief-text-area":{height:330,width:325,spaceHeight:0},"img-text-area":{height:390,width:270,spaceHeight:52},"img-text-area-withhead":{height:390,width:270,spaceHeight:107}},d={"brief-info-img":{width:200,height:330},"step-only-img":{width:450,height:325},"step-one-img":{width:480,height:346},"step-two-img":{width:480,height:167},"step-three-img-top":{width:235,height:176},"step-three-img-bottom":{width:480,height:155}},g={},l=function(t){var o=t.ph,a=o/(e-i),n=r.q("step-text-wrapper");if(null==n||0==n.length)return!1;r.array.each(n,function(e){var t=r.dom.getAttr(e,"texttype");if(t){var i=Math.max(e.offsetHeight,e.scrollHeight),o=s[t];if(i<o.height){if("brief-text-area"==t){var n=(o.height*a-i)/2;r.dom.setStyles(e,{position:"absolute",top:n}),r.dom.setStyle("brief-left-quote","top",n),r.dom.setStyle("brief-right-quote","bottom",o.height*a-i-n)}}else{var d=r.dom.getAttr(e,"id");if(r.dom.setStyle(e,"height",o.height*a-o.spaceHeight),g[d])g[d].update({container:d,element:d,overflow:"overflow-y"});else{var l=new h({container:d,element:d,overflow:"overflow-y"});l.render(d),g[d]=l}}}});var d=r.q("step-item-text-inner");if(null==d||0==d.length)return!1;var l=r.page.getViewHeight();r.array.each(d,function(e){var t=r.dom.query(".smaller-text-left",e)[0],i=r.dom.query(".bigger-text-left",e)[0],o=r.dom.query(".smaller-text-right",e),a=r.dom.query(".bigger-text-right",e);if(o.length>0){var n=o[0];if(n.offsetHeight>336&&!r.dom.hasAttr(n,"hasLoaded")){var s=r.dom.getAttr(n,"id");r.dom.setStyle(n,"height",336);var d=new h({container:s,element:s,overflow:"overflow-y"});d.render(s),g[s]=d,r.dom.setAttr(n,"hasLoaded",1)}}if(a.length>0){var m=a[0];if(m.offsetHeight>448&&!r.dom.hasAttr(m,"hasLoaded")){var s=r.dom.getAttr(m,"id");r.dom.setStyle(m,"height",448);var d=new h({container:s,element:s,overflow:"overflow-y"});d.render(s),g[s]=d,r.dom.setAttr(m,"hasLoaded",1)}}if(l>700){r.hide(t),r.show(i);var f=r.dom.query(".step-smaller-text-right-contanier",e),p=r.dom.query(".step-bigger-text-right-contanier",e);f.length>0&&r.hide(f[0]),p.length>0&&r.show(p[0])}else{r.show(t),r.hide(i);var f=r.dom.query(".step-smaller-text-right-contanier",e),p=r.dom.query(".step-bigger-text-right-contanier",e);f.length>0&&r.show(f[0]),p.length>0&&r.hide(p[0])}})},m=function(e){var t=e.container,i=parseInt(e.resizedContainerHeight),o=r.dom.getAttr(t,"stepType"),h=r.dom.query("img",t)[0],a=r.dom.query(".img-cover",t)[0],n=r.dom.getAttr(h,"_height");n>i?r.dom.setStyle(a,"margin-top",(i-n)/2):r.dom.setStyle(a,"margin-top",0),("brief-info-img"==o||"step-only-img"==o)&&r.dom.setStyles(a,{"margin-top":(i-n)/2,left:(d[o].width-r.dom.getAttr(h,"_width"))/2})},f=function(t){var h=t.ph,a=h/(e-i),n=r.q("step-img-wrapper");return null==n||0==n.length?!1:void r.array.each(n,function(e){var t=r.dom.getAttr(e,"stepType");if(t){var i=d[t].height*a;r.dom.setStyle(e,"height",i);var h=r.dom.getAttr(e,"imgLoaded");"2"==h&&o.fire("adjustSingleImg",{container:e,resizedContainerHeight:i})}})},p=function(t){var o=t.ph,h=t.pw,s=0,d=(h-(a+n))/2;r.dom.setStyle("body","height",o),r.dom.setStyles("left-cover",{height:o,width:d}),r.dom.setStyles("right-cover",{height:o,width:d+n}),r.dom.setStyle("step-play-container","left",d),r.g("brief-writer-info")&&r.dom.setStyle("brief-writer-info","height",469*o/(e-i)),r.g("brief-right-quote")&&r.dom.setStyle("brief-right-quote","display","block"),s=h>=1140?d:110,r.dom.setStyle("exp-title","left",s);var g=parseInt(r.dom.getCurrentStyle("step-search-form","width")),l=r.g("exp-title").offsetWidth,m=parseInt(r.dom.getCurrentStyle("keyword","width")),f=l+s,p=h-150-f;350>p?(form_left=f+20,m=p-100,g=p):(m=250,form_left=h-150-330,g=330),r.dom.setStyle("step-search-form","left",form_left),r.dom.setStyle("step-search-form","width",g),r.dom.setStyle("keyword","width",m)};return{init:function(e){r.object.extend(s,e),o.on("adjustSize",function(e){p(e),l(e),f(e)}),o.on("adjustSingleImg",function(e){m(e)}),r.dom.setStyle("step-search-form","display","block"),r.on("step-search-form","submit",function(e){""==r.trim(r.g("keyword").value)?window.location.reload(!0):this.submit(),r.event.preventDefault(e)})},resize:function(h){var a=r.page.getViewHeight(),n=r.page.getViewWidth();a=Math.max(a,e)-i,n=Math.max(n,t),(a>e-i||n>t||h)&&o.fire("adjustSize",{ph:a,pw:n})}}}()});
;define("step:widget/ui/brand-ads/brand-ads.js",function(a,e,n){var t=a("common:widget/lib/tangram/base/base.js");n.exports.init=function(a){var e=t.dom.query(".brand-pro-wrap a"),n="/static/article/ui/log/log.gif";t.each(e,function(e){t.on(e,"click",function(){var e=[];e.push("type=brand_ad"),e.push("page=album"),e.push("aid="+a),e.push("eidenc="+F.context("eid"));var t=Math.round((new Date).getTime()/1e3);e.push("t="+t);var i=document.createElement("img");i.src=n+"?"+e.join("&"),window["___article_brand_"+1*new Date]=i})})}});
;define("step:widget/ui/step-album/step-album.js",function(t,e,i){var n=t("common:widget/lib/tangram/base/base.js"),s=t("common:widget/ui/album/album.js");i.exports.init=function(){n.on("step-play-list","click",function(t){n.event.stopPropagation(t);var e=n.event.getTarget(t);if(n.dom.hasClass(e,"inner-img-cover")){for(var i=n.dom.getAttr(e,"data-src"),a=F.context("stepPic").stepPic,o=0,c=a.length;c>o&&!(a[o].src.indexOf(i)>-1);o++);s.initAlbum(o,F.context("stepPic"))}})}});
;define("step:widget/ui/user-guide/user-guide.js",function(e,t,i){var d=e("common:widget/lib/tangram/base/base.js");e("common:widget/lib/tangram/fx/fadeOut/fadeOut.js"),i.exports={init:function(){if(d.cookie.get("isStepGuided"))return!1;var e=d.dom.create("div",{"class":"guide-container"});e.innerHTML='<img src="http://exp.bdstatic.com/static/step/widget/img/user-guide_083b4c4.gif">';var t=d.g("step-play-container");t.appendChild(e),d.dom.setStyle(e,"top",(t.offsetHeight-220)/2),setTimeout(function(){d.fx.fadeOut(e),d.cookie.set("isStepGuided","done",{path:"/"})},2e3)}}});
;define("step:widget/ui/vote-favor/vote-favor.js",function(e,i,t){var n=e("common:widget/lib/tangram/base/base.js"),o=e("common:widget/ui/dialog/dialog.js"),a=e("common:widget/ui/favor/favor.js"),d=(e("common:widget/ui/error/error.js"),e("common:widget/ui/ajax/ajax.js"),e("common:widget/lib/fis/event/event.js").eventCenter),s={eidEnc:"",feedbackData:{useful:{id:"",type:4,hadFeedback:!1,hasClass:"voted"},favor:{id:"",type:0,hadFeedback:!1,hasClass:"favored"}},init:function(e,i,t){if(null!==e&&""!==e&&null!==i&&""!==i){var o=this,a=o.feedbackData;a.useful.id=e,a.favor.id=i,a.favor.hadFeedback=t,o.eidEnc=F.context("eid"),n.cookie.get(o.eidEnc)&&(n.dom.addClass(a.useful.id,a.useful.hasClass),a.useful.hadFeedback=!0),o.bindEvent(a.useful),o.bindEvent(a.favor)}},bindEvent:function(e){var i=this,s=e.id,r=function(t){var a=[];a.push("method=feedback"),a.push("eidEnc="+F.context("eid")),a.push("BdStoken="+F.context("BdStoken")),a.push("bdstt="+F.context("bdstt")),a.push("type=4"),t&&a.push("isCost=1"),a=a.join("&"),d.fire("login.check",{isLogin:function(){var d=F.context("isLogin");return d?void n.ajax.post("/submit/exp",a,function(a,d){if(""!==d){var s=n.json.parse(d);if(0==s.errno){var c=n.dom.query("#vote-btn .num");if(c){var f=parseInt(c.innerHTML);c.innerHTML=f+1}if(t)return;i.hasFeedback(e)}else 2001==s.errno?o.confirm("经验提示",{info:'<div class="exp-has-used">您已对该篇经验进行了投票，再次投票需要消耗20财富值？</div>',width:300,height:120,onconfirm:function(){r(!0)}}):2040==s.errno?o.alert("经验提示",{info:'<p class="exp-tip">您的财富值不够</p>',width:300,height:120}):2041==s.errno&&o.alert("经验提示",{info:'<p class="exp-tip">您不能给自己的经验投票</p>',width:300,height:120})}}):void window.location.reload(!0)}})};n.event.on(s,"click",function(){if(e.hadFeedback||this.className.indexOf(e.hasClass)>-1,e.type){if(e.hadFeedback=!0,F.context("feedbackSuc")>=F.context("MAX_SUC_FAIL_TIMES"))return void o.alert("提示",{info:"数量已达上限",width:300,height:200});r(),n.sio.callByBrowser("http://like.baidu.com/set?key="+F.context("eid")+"&cb=setVoteData&type=0&like=1&pid=4&index=0&sub_index=0&random="+Math.random()),window.setVoteData=function(){}}else{var i=function(){t.exports.hasFeedback(e)};a.favor(F.context("eid"),i)}})},hasFeedback:function(e){var i=this,t=e.id,o=n.dom.query("#"+t+" .num")[0];o.innerHTML=parseInt(o.innerHTML)+1,n.dom.addClass(t,e.hasClass),e.type&&n.cookie.set(i.eidEnc,1,{path:"/"})}};t.exports=s});